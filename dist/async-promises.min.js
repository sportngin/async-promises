/**
 * Restful Resources service for AngularJS apps
 * @version v1.4.0 - 2014-05-22 * @link https://github.com/sportngin/async-promises
 * @author Jesse Houchins <jesse.houchins@sportngin.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(){"use strict";var a=angular.module("async-promises",[]);a.factory("AsyncPromises",function(a){function b(a){var b=0;for(var c in a)b++;return b}function c(c){var d=a.defer();return this.tasks=c=c||{},this.tasksRemaining=b(c),this.tasksRemaining?(this.success=function(a){d.resolve(a)},this.error=function(a,b){d.reject({taskName:a,data:b})},this.progress=function(a,b){c[a]=b,d.notify({taskName:a,data:b}),this.resolveDependency(a)},angular.forEach(c,angular.bind(this,this.setDependencies)),this.startNonDependentTasks(),d.promise):(d.resolve(),d.promise)}return c.prototype={setDependencies:function(a,b){var c,d,e=this.tasks;angular.isArray(a)||(e[b]=a=[a]),a.runTask=a.pop(),a.length&&angular.forEach(a,function(a){c=e[a],d=c.dependents=c.dependents||[],d.push(c)})},resolveDependency:function(a){this.tasks[a];return this.tasksRemaining--,this.tasksRemaining?(angular.forEach(this.tasks,function(b){var c=!b||!b.runTask;if(!c){var d=b.indexOf(a);-1!==d&&b.splice(d,1)}}),void this.startNonDependentTasks()):this.success(this.tasks)},startNonDependentTasks:function(){var a=this;angular.forEach(a.tasks,function(b,c){if(b&&!b.length&&b.runTask){var d=b.runTask();delete b.runTask,d&&d.then?d.then(angular.bind(a,a.progress,c),angular.bind(a,a.error,c)):a.progress(c,d)}})}},{auto:function(a){return new c(a)}}})}();